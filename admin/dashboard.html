<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Admin Dashboard - Aspire Furniture UK</title>
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="admin.css">
    <meta name="msapplication-TileColor" content="#8b5e3c">
    <meta name="theme-color" content="#8b5e3c">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://aspire-furnitures-uk.onrender.com/socket.io/socket.io.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <img src="../images/logo.svg" alt="Aspire Furniture UK Logo" width="150">
            </div>
            <div class="top-nav-items">
                <a href="#" class="active top-nav-item" onclick="showSection('orders')">
                    <i class="fas fa-shopping-cart"></i> Orders
                </a>
                <div class="large-nav-separator"></div>
                <a href="#" onclick="logout()" class="logout-btn top-nav-item">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
            <nav class="sidebar-nav">
                <!-- Other navigation items can go here if needed -->
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="top-bar">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search orders..." onkeyup="searchOrders(this.value)">
                </div>
                <div class="user-info">
                    <span>Admin</span>
                    <i class="fas fa-user-circle"></i>
                </div>
            </div>

            <!-- Orders Section -->
            <div id="orders" class="content-section active">
                <div class="section-header">
                    <h2>Orders Management</h2>
                    <div class="order-filters">
                        <select onchange="filterOrders(this.value)">
                            <option value="all">All Orders</option>
                            <option value="pending">Pending</option>
                            <option value="processing">Processing</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                </div>
                <div class="orders-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Product</th>
                                <th>Size/Option</th>
                                <th>Quantity</th>
                                <th>Color</th>
                                <th>Total Price</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Products Section -->
            <div id="products" class="content-section">
                <div class="section-header">
                    <h2>Products Management</h2>
                    <button class="action-btn edit" onclick="addNewProduct()">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
                <div class="orders-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Product ID</th>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Stock</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <tr>
                                <td colspan="6" style="text-align: center;">No products found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Customers Section -->
            <div id="customers" class="content-section">
                <div class="section-header">
                    <h2>Customer Management</h2>
                </div>
                <div class="orders-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Customer ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Orders</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="customersTableBody">
                            <tr>
                                <td colspan="6" style="text-align: center;">No customers found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="content-section">
                <div class="section-header">
                    <h2>System Settings</h2>
                </div>
                <div class="settings-content">
                    <div class="setting-group">
                        <h3>General Settings</h3>
                        <div class="form-group">
                            <label for="siteName">Site Name</label>
                            <input type="text" id="siteName" value="Aspire Furniture UK">
                        </div>
                        <div class="form-group">
                            <label for="adminEmail">Admin Email</label>
                            <input type="email" id="adminEmail" value="admin@aspirefurniture.co.uk">
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>Appearance</h3>
                        <div class="form-group">
                            <label for="theme">Theme</label>
                            <select id="theme">
                                <option>Light</option>
                                <option>Dark</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>Security</h3>
                        <div class="form-group">
                            <label for="password">Change Password</label>
                            <input type="password" id="password" placeholder="Enter new password">
                        </div>
                        <button class="action-btn edit" onclick="saveSettings()">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Socket.IO based on environment
        let socket;
        let apiUrl;
        
        // Check if we're running on localhost or production
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            // Local development
            socket = io('http://localhost:3002');
            apiUrl = 'http://localhost:3002';
        } else {
            // Production
            socket = io(); // Uses the same origin as the page
            apiUrl = ''; // Relative path
        }
        
        // Check if user is logged in
        if (!localStorage.getItem('adminLoggedIn')) {
            window.location.href = 'index.html';
        }
        
        // Fetch orders from API on page load
        fetchOrdersFromAPI();
        
        // When admin connects, request initial orders (fallback)
        socket.emit('admin-connected');
        
        // Listen for initial orders (fallback method)
        socket.on('initial-orders', (orders) => {
            // Store orders in localStorage
            localStorage.setItem('orders', JSON.stringify(orders));
            // Load orders in UI
            loadOrders();
        });
        
        // Listen for new orders in real-time
        socket.on('new-order', (order) => {
            // Get existing orders
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            // Add new order
            orders.push(order);
            // Save updated orders
            localStorage.setItem('orders', JSON.stringify(orders));
            // Reload orders in UI if orders section is active
            if (document.getElementById('orders').classList.contains('active')) {
                loadOrders();
            }
            // Show notification
            showOrderNotification(order);
        });
        
        // Listen for order deletions in real-time
        socket.on('order-deleted', (orderId) => {
            // Get existing orders
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            // Remove the deleted order
            orders = orders.filter(order => order.id !== orderId);
            // Save updated orders
            localStorage.setItem('orders', JSON.stringify(orders));
            // Reload orders in UI if orders section is active
            if (document.getElementById('orders').classList.contains('active')) {
                loadOrders();
            }
            // Remove the row from the table if it exists
            const row = document.querySelector('tr[data-order-id="' + orderId + '"]');
            if (row) {
                row.remove();
            }
        });
        
        // Listen for all orders deletion in real-time
        socket.on('all-orders-deleted', () => {
            // Clear orders from localStorage
            localStorage.setItem('orders', JSON.stringify([]));
            // Reload orders in UI if orders section is active
            if (document.getElementById('orders').classList.contains('active')) {
                loadOrders();
            }
        });

        // Fetch orders from API
        function fetchOrdersFromAPI() {
            fetch(apiUrl + '/api/orders')
                .then(response => response.json())
                .then(orders => {
                    // Store orders in localStorage
                    localStorage.setItem('orders', JSON.stringify(orders));
                    // Load orders in UI
                    loadOrders();
                })
                .catch(error => {
                    console.error('Error fetching orders from API:', error);
                    // Fallback to localStorage if API fails
                    loadOrders();
                });
        }

        // Show notification for new orders
        function showOrderNotification(order) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'order-notification';
            notification.innerHTML = '<div class="notification-content">' +
                '<i class="fas fa-bell"></i>' +
                '<div>' +
                '<strong>New Order Received!</strong>' +
                '<p>Order ID: ' + (order.id || 'N/A') + '</p>' +
                '<p>Product: ' + (order.productName || order.product || 'Unknown') + '</p>' +
                '</div>' +
                '</div>' +
                '<button class="close-notification" onclick="this.parentElement.remove();">&times;</button>';
            
            // Add to body
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            document.querySelectorAll('.sidebar-nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Find the clicked link and mark it as active
            const links = document.querySelectorAll('.sidebar-nav a');
            for (let link of links) {
                if (link.getAttribute('onclick').includes(sectionId)) {
                    link.classList.add('active');
                    break;
                }
            }
            
            // Load data for the selected section
            if (sectionId === 'orders') {
                loadOrders();
            } else if (sectionId === 'products') {
                loadProducts();
            } else if (sectionId === 'customers') {
                loadCustomers();
            }
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('adminLoggedIn');
                window.location.href = 'index.html';
            }
        }

        // Load and display orders
        function loadOrders() {
            try {
                // Get orders from localStorage
                const ordersData = localStorage.getItem('orders');
                
                // Parse orders and ensure each order has an ID
                let orders = [];
                if (ordersData) {
                    orders = JSON.parse(ordersData);
                    // Add IDs to orders that don't have them
                    orders = orders.map(order => {
                        if (!order.id) {
                            order.id = 'ORDER-' + Math.random().toString(36).substr(2, 9);
                        }
                        return order;
                    });
                    // Save back to localStorage with IDs
                    localStorage.setItem('orders', JSON.stringify(orders));
                }

                // Sort orders by date (newest first)
                orders.sort((a, b) => new Date(b.orderDate || b.timestamp) - new Date(a.orderDate || a.timestamp));

                // Clear existing table content
                const tableBody = document.getElementById('ordersTableBody');
                tableBody.innerHTML = '';

                if (!orders || orders.length === 0) {
                    tableBody.innerHTML = '<tr>' +
                        '<td colspan="9" style="text-align: center; padding: 2rem;">' +
                        '<div class="no-orders">' +
                        '<i class="fas fa-inbox"></i>' +
                        '<p>No orders found</p>' +
                        '</div>' +
                        '</td>' +
                        '</tr>';
                    return;
                }

                // Update orders count in header
                updateOrdersCount(orders);

                // Populate orders table
                populateOrders(orders);

            } catch (error) {
                console.error('Error loading orders:', error);
                document.getElementById('ordersTableBody').innerHTML = '<tr>' +
                    '<td colspan="9" style="text-align: center; padding: 2rem;">' +
                    '<div class="error-message">' +
                    '<i class="fas fa-exclamation-circle"></i>' +
                    '<p>Error loading orders. Please try refreshing the page.</p>' +
                    '</div>' +
                    '</td>' +
                    '</tr>';
            }
        }

        // Populate orders table
        function populateOrders(ordersData) {
            const tableBody = document.getElementById('ordersTableBody');
            tableBody.innerHTML = '';

            ordersData.forEach(order => {
                // Ensure order has an ID
                const orderId = order.id || 'ORDER-' + Math.random().toString(36).substr(2, 9);
                
                const row = document.createElement('tr');
                row.setAttribute('data-order-id', orderId);
                row.innerHTML = '<td>' + orderId + '</td>' +
                    '<td>' + (order.customer || 'N/A') + '</td>' +
                    '<td>' +
                    '<div class="product-info">' +
                    '<div class="product-thumbnail-container">' +
                    '<img src="' + (order.selectedImage || '../images/placeholder.jpg') + '" ' +
                    'alt="Product Image" ' +
                    'class="product-thumbnail" ' +
                    'onerror="this.src=\'../images/placeholder.jpg\'">' +
                    '</div>' +
                    '<span>' + (order.product || order.productName || 'N/A') + '</span>' +
                    '</div>' +
                    '</td>' +
                    '<td>' + (order.size || order.selectedSize || 'N/A') + '</td>' +
                    '<td>' + (order.quantity || '1') + ' ' + (order.unit || '') + '</td>' +
                    '<td>' + (order.color || 'Not specified') + '</td>' +
                    '<td>' + (order.totalPrice || order.price || 'N/A') + '</td>' +
                    '<td>' +
                    '<span class="status-badge ' + (order.status || 'pending') + '">' +
                    (order.status || 'pending').charAt(0).toUpperCase() + (order.status || 'pending').slice(1) +
                    '</span>' +
                    '</td>' +
                    '<td class="actions-cell">' +
                    '<button onclick="viewOrder(\'' + orderId + '\')" class="action-btn view" title="View Details">' +
                    '<i class="fas fa-eye"></i>' +
                    '</button>' +
                    '<button onclick="updateOrderStatus(\'' + orderId + '\')" class="action-btn edit" title="Update Status">' +
                    '<i class="fas fa-edit"></i>' +
                    '</button>' +
                    '<button onclick="deleteOrder(\'' + orderId + '\')" class="action-btn delete" title="Delete Order">' +
                    '<i class="fas fa-trash"></i>' +
                    '</button>' +
                    '</td>';
                tableBody.appendChild(row);
            });
        }

        // View order details
        function viewOrder(orderId) {
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const order = orders.find(o => o.id === orderId);
            if (!order) return;

            // Create a modal for order details
            const modalHtml = '<div class="order-details-modal">' +
                '<div class="modal-content">' +
                '<div class="modal-header">' +
                '<h2>Order Details</h2>' +
                '<button onclick="closeModal()" class="close-btn">&times;</button>' +
                '</div>' +
                '<div class="modal-body">' +
                '<div class="order-image">' +
                '<img src="' + (order.selectedImage || '../images/placeholder.jpg') + '" ' +
                'alt="Product Image" ' +
                'onerror="this.src=\'../images/placeholder.jpg\'">' +
                '</div>' +
                '<div class="order-info">' +
                '<p><strong>Order ID:</strong> ' + (order.id || 'N/A') + '</p>' +
                '<p><strong>Customer:</strong> ' + (order.customer || 'N/A') + '</p>' +
                '<p><strong>Address:</strong> ' + (order.address || 'N/A') + '</p>' +
                '<p><strong>Postcode:</strong> ' + (order.postcode || 'N/A') + '</p>' +
                '<p><strong>WhatsApp:</strong> ' + (order.whatsapp || 'N/A') + '</p>' +
                '<p><strong>Color:</strong> ' + (order.color || 'Not specified') + '</p>' +
                '<p><strong>Product:</strong> ' + (order.product || order.productName || 'N/A') + '</p>' +
                '<p><strong>Size/Quantity:</strong> ' + (order.size || order.selectedSize || (order.quantity || '1') + ' ' + (order.unit || 'item(s)') || 'N/A') + '</p>' +
                (order.pricePerUnit || order.pricePerPack ? '<p><strong>Price Per Unit:</strong> ' + (order.pricePerUnit || order.pricePerPack) + '</p>' : '') +
                (order.purchaseOption ? '<p><strong>Purchase Option:</strong> ' + order.purchaseOption + '</p>' : '') +
                '<p><strong>Quantity:</strong> ' + (order.quantity || '1') + ' ' + (order.unit || 'item(s)') + '</p>' +
                '<p><strong>Total Price:</strong> ' + (order.totalPrice || order.price || 'N/A') + '</p>' +
                '<p><strong>Status:</strong> ' +
                '<span class="status-badge ' + (order.status || 'pending') + '">' +
                (order.status || 'pending').charAt(0).toUpperCase() + (order.status || 'pending').slice(1) +
                '</span>' +
                '</p>' +
                '<p><strong>Order Date:</strong> ' + new Date(order.orderDate || order.timestamp).toLocaleString() + '</p>' +
                '</div>' +
                '</div>' +
                '</div>';

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }

        // Close modal
        function closeModal() {
            const modal = document.querySelector('.order-details-modal');
            if (modal) {
                modal.remove();
            }
        }

        // Delete order
        function deleteOrder(orderId) {
            if (!confirm('Are you sure you want to delete this order? This action cannot be undone.')) {
                return;
            }

            // Call server API to delete the order
            fetch(apiUrl + '/api/delete-order/' + orderId, {
                method: 'DELETE'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Show success message
                    const successMessage = document.createElement('div');
                    successMessage.className = 'alert alert-success';
                    successMessage.innerHTML = '<div>' +
                        '<i class="fas fa-check-circle"></i>' +
                        'Order deleted successfully' +
                        '</div>' +
                        '<button class="close-alert" onclick="this.parentElement.remove();">&times;</button>';
                    document.querySelector('.main-content').insertBefore(
                        successMessage, 
                        document.querySelector('.content-section.active')
                    );

                    // Remove success message after 3 seconds
                    setTimeout(() => {
                        if (successMessage.parentElement) {
                            successMessage.remove();
                        }
                    }, 3000);

                    // Immediately remove the row from the table
                    const row = document.querySelector('tr[data-order-id="' + orderId + '"]');
                    if (row) {
                        row.remove();
                    }

                    // Reload orders table to update counts and ensure consistency
                    if (document.getElementById('orders').classList.contains('active')) {
                        loadOrders();
                    }
                } else {
                    throw new Error(data.message || 'Failed to delete order');
                }
            })
            .catch(error => {
                console.error('Error deleting order:', error);
                
                // Show error message
                const errorMessage = document.createElement('div');
                errorMessage.className = 'alert alert-error';
                errorMessage.innerHTML = '<div>' +
                    '<i class="fas fa-exclamation-circle"></i>' +
                    error.message +
                    '</div>' +
                    '<button class="close-alert" onclick="this.parentElement.remove();">&times;</button>';
                document.querySelector('.main-content').insertBefore(
                    errorMessage, 
                    document.querySelector('.content-section.active')
                );
            });
        }

        // Update order status
        function updateOrderStatus(orderId) {
            try {
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                const order = orders.find(o => o.id === orderId);
                if (!order) return;

                const newStatus = prompt(
                    'Update order status (pending/processing/completed):',
                    order.status || 'pending'
                );

                if (newStatus && ['pending', 'processing', 'completed'].includes(newStatus.toLowerCase())) {
                    order.status = newStatus.toLowerCase();
                    localStorage.setItem('orders', JSON.stringify(orders));
                    
                    // Reload the orders table
                    loadOrders();
                } else if (newStatus) {
                    alert('Invalid status. Please use: pending, processing, or completed');
                }
            } catch (error) {
                console.error('Error updating order status:', error);
                alert('Error updating order status. Please try again.');
            }
        }

        // Search orders
        function searchOrders(query) {
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const filtered = orders.filter(order => 
                (order.customer && order.customer.toLowerCase().includes(query.toLowerCase())) ||
                (order.id && order.id.toLowerCase().includes(query.toLowerCase())) ||
                (order.product && order.product.toLowerCase().includes(query.toLowerCase())) ||
                (order.productName && order.productName.toLowerCase().includes(query.toLowerCase()))
            );
            populateOrders(filtered);
        }

        // Filter orders
        function filterOrders(status) {
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const filtered = status === 'all' 
                ? orders 
                : orders.filter(order => order.status === status);
            populateOrders(filtered);
        }

        // Add refresh button functionality
        function refreshOrders() {
            loadOrders();
        }

        // Delete all orders
        function deleteAllOrders() {
            if (!confirm('Are you sure you want to delete ALL orders? This action cannot be undone.')) {
                return;
            }

            // Call server API to delete all orders
            fetch(apiUrl + '/api/delete-all-orders', {
                method: 'DELETE'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Show success message
                    const successMessage = document.createElement('div');
                    successMessage.className = 'alert alert-success';
                    successMessage.innerHTML = '<div>' +
                        '<i class="fas fa-check-circle"></i>' +
                        'All orders deleted successfully' +
                        '</div>' +
                        '<button class="close-alert" onclick="this.parentElement.remove();">&times;</button>';
                    document.querySelector('.main-content').insertBefore(
                        successMessage, 
                        document.querySelector('.content-section.active')
                    );

                    // Remove success message after 3 seconds
                    setTimeout(() => {
                        if (successMessage.parentElement) {
                            successMessage.remove();
                        }
                    }, 3000);

                    // Reload orders table
                    if (document.getElementById('orders').classList.contains('active')) {
                        loadOrders();
                    }
                } else {
                    throw new Error(data.message || 'Failed to delete all orders');
                }
            })
            .catch(error => {
                console.error('Error deleting all orders:', error);
                
                // Show error message
                const errorMessage = document.createElement('div');
                errorMessage.className = 'alert alert-error';
                errorMessage.innerHTML = '<div>' +
                    '<i class="fas fa-exclamation-circle"></i>' +
                    error.message +
                    '</div>' +
                    '<button class="close-alert" onclick="this.parentElement.remove();">&times;</button>';
                document.querySelector('.main-content').insertBefore(
                    errorMessage, 
                    document.querySelector('.content-section.active')
                );
            });
        }

        // Update orders count in header
        function updateOrdersCount(orders) {
            const pendingCount = orders.filter(order => order.status === 'pending').length;
            const processingCount = orders.filter(order => order.status === 'processing').length;
            const completedCount = orders.filter(order => order.status === 'completed').length;

            // Update the section header for orders
            const ordersHeader = document.querySelector('#orders .section-header');
            if (ordersHeader) {
                ordersHeader.innerHTML = '<div class="header-content">' +
                    '<h2>Orders Management</h2>' +
                    '<div class="order-stats">' +
                    '<div class="stat-item pending">' +
                    '<span class="stat-count">' + pendingCount + '</span>' +
                    '<span class="stat-label">Pending</span>' +
                    '</div>' +
                    '<div class="stat-item processing">' +
                    '<span class="stat-count">' + processingCount + '</span>' +
                    '<span class="stat-label">Processing</span>' +
                    '</div>' +
                    '<div class="stat-item completed">' +
                    '<span class="stat-count">' + completedCount + '</span>' +
                    '<span class="stat-label">Completed</span>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '<div class="header-actions">' +
                    '<button onclick="refreshOrders()" class="refresh-btn">' +
                    '<i class="fas fa-sync-alt"></i> Refresh' +
                    '</button>' +
                    '<button onclick="deleteAllOrders()" class="action-btn delete" style="margin-left: 10px;">' +
                    '<i class="fas fa-trash-alt"></i> Delete All Orders' +
                    '</button>' +
                    '</div>';
            }
        }

        // Load products (placeholder)
        function loadProducts() {
            // This would connect to a products API in a real application
            const productsTable = document.getElementById('productsTableBody');
            productsTable.innerHTML = '<tr>' +
                '<td colspan="6" style="text-align: center;">' +
                '<p>Product management features coming soon...</p>' +
                '<p class="text-muted">In the meantime, products are managed through the main website.</p>' +
                '</td>' +
                '</tr>';
        }

        // Load customers (placeholder)
        function loadCustomers() {
            // This would connect to a customers API in a real application
            const customersTable = document.getElementById('customersTableBody');
            customersTable.innerHTML = '<tr>' +
                '<td colspan="6" style="text-align: center;">' +
                '<p>Customer management features coming soon...</p>' +
                '<p class="text-muted">Customer data is currently stored with order information.</p>' +
                '</td>' +
                '</tr>';
        }

        // Add new product (placeholder)
        function addNewProduct() {
            alert('Product creation feature coming soon...');
        }

        // Save settings (placeholder)
        function saveSettings() {
            alert('Settings saved successfully!');
        }

        // Add CSS for notifications
        const style = document.createElement('style');
        style.textContent = '.order-notification {' +
            'position: fixed;' +
            'top: 20px;' +
            'right: 20px;' +
            'background: #fff;' +
            'border-left: 4px solid #4CAF50;' +
            'box-shadow: 0 2px 10px rgba(0,0,0,0.1);' +
            'padding: 15px;' +
            'border-radius: 4px;' +
            'z-index: 10000;' +
            'display: flex;' +
            'align-items: center;' +
            'justify-content: space-between;' +
            'min-width: 300px;' +
            'animation: slideIn 0.3s ease;' +
            '}' +
            '@keyframes slideIn {' +
            'from { transform: translateX(100%); }' +
            'to { transform: translateX(0); }' +
            '}' +
            '.notification-content {' +
            'display: flex;' +
            'align-items: center;' +
            'gap: 10px;' +
            '}' +
            '.notification-content i {' +
            'color: #4CAF50;' +
            'font-size: 20px;' +
            '}' +
            '.close-notification {' +
            'background: none;' +
            'border: none;' +
            'font-size: 20px;' +
            'cursor: pointer;' +
            'color: #999;' +
            '}';
        document.head.appendChild(style);

        // Initial load
        loadOrders();
    </script>
</body>
</html>